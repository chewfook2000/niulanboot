<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>AI ç‰›æ‡’è®¡ç®—å™¨</title>

<style>

body{
background:#0f172a;
color:white;
font-family:Arial;
text-align:center;
margin:0;
}

header{
padding:18px;
font-size:26px;
font-weight:bold;
background:#111827;
}

.container{
max-width:500px;
margin:auto;
padding:20px;
}

.cards{
display:flex;
justify-content:center;
gap:10px;
margin:20px 0;
flex-wrap:wrap;
}

.card{
background:white;
color:black;
width:60px;
height:80px;
border-radius:10px;
display:flex;
align-items:center;
justify-content:center;
font-size:22px;
font-weight:bold;
}

.result{
font-size:34px;
color:#facc15;
margin:10px 0;
}

.ai{
background:#020617;
padding:15px;
border-radius:10px;
margin-top:10px;
}

.grid{
display:grid;
grid-template-columns:repeat(4,1fr);
gap:10px;
margin-top:20px;
}

button{
padding:16px;
font-size:18px;
border:none;
border-radius:10px;
background:#1f2937;
color:white;
}

.control{
margin-top:10px;
display:flex;
gap:10px;
}

.control button{
flex:1;
}

</style>
</head>

<body>

<header>ğŸ¤– AI ç‰›æ‡’è®¡ç®—å™¨</header>

<div class="container">

<div class="cards" id="cards"></div>

<div class="result" id="result">
è¾“å…¥5å¼ ç‰Œ
</div>

<div class="ai" id="aiBox">
AIåˆ†æç­‰å¾…ä¸­...
</div>

<div class="grid" id="keys"></div>

<div class="control">
<button onclick="del()">åˆ é™¤</button>
<button onclick="reset()">é‡ç½®</button>
</div>

</div>

<script>

/* æŒ‰é’® */

const values=[
"A","2","3","4","5","6","7","8","9",
"10","J","Q","K","â™ A"
]

let cards=[]

const cardsDiv=document.getElementById("cards")
const result=document.getElementById("result")
const aiBox=document.getElementById("aiBox")
const keys=document.getElementById("keys")

values.forEach(v=>{
let b=document.createElement("button")
b.innerText=v
b.onclick=()=>add(v)
keys.appendChild(b)
})

function render(arr){
cardsDiv.innerHTML=""

arr.forEach(c=>{
let d=document.createElement("div")
d.className="card"
d.innerText=c
cardsDiv.appendChild(d)
})
}

function add(v){
if(cards.length>=5) return
cards.push(v)
render(cards)
calc()
}

function del(){
cards.pop()
render(cards)
}

function reset(){
cards=[]
render(cards)
result.innerText="è¾“å…¥5å¼ ç‰Œ"
aiBox.innerText="AIåˆ†æç­‰å¾…ä¸­..."
}

/* ç‰Œå€¼ */

function val(v){
if(v==="A"||v==="â™ A") return 1
if(v==="J"||v==="Q"||v==="K") return 10
return parseInt(v)
}

/* 3 / 6 å˜ç‰Œ */

function variants(arr){

let res=[arr]

for(let i=0;i<arr.length;i++){

if(arr[i]===3||arr[i]===6){

let temp=[]

res.forEach(r=>{

let a=[...r]
let b=[...r]

a[i]=3
b[i]=6

temp.push(a)
temp.push(b)

})

res=temp

}

}

return res
}

/* ç®—ç‰› */

function score(nums){

for(let i=0;i<3;i++){
for(let j=i+1;j<4;j++){
for(let k=j+1;k<5;k++){

let s=nums[i]+nums[j]+nums[k]

if(s%10===0){

let rest=0

for(let x=0;x<5;x++){
if(x!==i&&x!==j&&x!==k){
rest+=nums[x]
}
}

let n=rest%10

return {
value:n===0?10:n,
combo:[i,j,k]
}

}
}
}
}

return {value:0}

}

/* èµ”ç‡ */

function getOdds(cards,best){

let count={}

cards.forEach(c=>{
count[c]=(count[c]||0)+1
})

/* äº”å…¬ */

let face=cards.filter(c=>["J","Q","K"].includes(c))
if(face.length===5) return 5

/* å››æ¡ */

for(let k in count){
if(count[k]===4) return 4
}

/* é»‘æ¡ƒA + JQK */

if(cards.includes("â™ A")){
let ok=cards.some(c=>["J","Q","K"].includes(c))
if(ok) return 3
}

/* ç‰›ç‰› */

if(best===10) return 2

/* ç‰›1-9 */

if(best>0) return 1

return 0
}

/* æ’ç‰Œ */

function layoutCards(top,bottom){

cardsDiv.innerHTML=""

/* ä¸Šé¢ */

top.forEach(c=>{
let d=document.createElement("div")
d.className="card"
d.innerText=c
cardsDiv.appendChild(d)
})

let br=document.createElement("div")
br.style.flexBasis="100%"
cardsDiv.appendChild(br)

/* ä¸‹é¢ */

bottom.forEach(c=>{
let d=document.createElement("div")
d.className="card"
d.innerText=c
cardsDiv.appendChild(d)
})

}

function calc(){

if(cards.length!==5) return

let nums=cards.map(val)

let all=variants(nums)

let best=0
let bestData=null

all.forEach(v=>{
let r=score(v)
if(r.value>best){
best=r.value
bestData={nums:v,info:r}
}
})

let odds=getOdds(cards,best)

/* æ’ç‰Œ */

if(bestData){

let combo=bestData.info.combo

let top=[]
let bottom=[]

for(let i=0;i<5;i++){

if(combo.includes(i)){
bottom.push(cards[i])
}else{
top.push(cards[i])
}

}

layoutCards(top,bottom)

/* AI */

let a=bestData.nums[combo[0]]
let b=bestData.nums[combo[1]]
let c=bestData.nums[combo[2]]

aiBox.innerHTML=
"AIæœ€ä½³ç»„åˆ<br>"+
a+" + "+b+" + "+c+" = "+(a+b+c)

}

/* åå­— */

let name=""

if(best===0){
name="æ²¡ç‰›"
}
else if(odds===5){
name="ğŸ‚ äº”ç‰›"
}
else if(odds===3 && best===1){
name="ğŸ„ ç‰›å†¬è‡"
}
else if(best===10){
name="ğŸ‚ ç‰›ç‰›"
}
else{
name="ç‰› "+best
}

result.innerText=name

if(odds>0){
result.innerText+=" (èµ”ç‡ "+odds+"å€)"
}

}

</script>

</body>
</html>
